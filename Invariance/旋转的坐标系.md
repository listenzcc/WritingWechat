## 旋转的坐标系

三维空间中，点的运动有平移和旋转两种方式。
因此，需要为点建立自身的笛卡尔坐标系，
从而描述它的旋转过程。

----
- [旋转的坐标系](#旋转的坐标系)
- [笛卡尔基及其旋转](#笛卡尔基及其旋转)
- [基于IMU的运动解析](#基于imu的运动解析)

## 笛卡尔基及其旋转

为了描述三维空间中点的旋转，
我们首先为它建立笛卡尔基，
如下图

![Rotate 3D](Rotate-3D.png)

图中可以看到，
在物体发生旋转之后，
它的坐标系会跟随着旋转一同发生变化。

同时，由于三个轴的正交特性，
可以认为沿三个轴的旋转变换是彼此独立的。
也就是说，

> 沿三个轴的旋转变换构成可交换群。

这点很重要，但并不会造成实际应用的难点。

实际应用中的问题是，
由于坐标轴的方向随旋转运动而时刻发生改变，
因此，若物体的平移运动速度向量是以其坐标轴为基准进行表示的，
那么，这就会导致物体的平移运动在不同时刻会得到不同的效果。
也就是说，

> 沿坐标轴的平移运动，不构成可交换群。

因此，运动轨迹不再像普通加法一样，可以由简单累加而得到，
而是需要进行曲线积分的计算。

- 无旋转的平移速度与物体位置关系
  
  $$y = \int v(t) dt$$

  其中，$v(t)$ 代表即时速率，物体位置可由简单的累加计算得到；

- 有旋转的平移速度与物体位置关系

  $$y = \int v(t) \cdot n(t) dt $$

  其中，$n(t)$ 代表即时坐标轴方向，物体的位置需要由曲线积分计算得到。

## 基于IMU的运动解析

基于以上的分析，
我们试图以固定在膝盖处的IMU信号为基础，
对被试小腿的运动轨迹进行解析，
可得以下结果

![Detail Trace](DetailTrace.png)

其中， 黑色线代表点的运动轨迹。
红、绿、蓝三个颜色分别代表点的三个互相正交的坐标轴，
可以看到，它在不同的时刻具有不同的旋转状态。

而在不同的运动状态下，我们对运动轨迹进行绘制，
并展示在同一个三维空间里，
得到了如下图像

![Mean Trace](MeanTrace.png)

图中展示了`9`种不同运动状态下的IMU运动轨迹，
可以看到，基于IMU的加速度信号对运动轨迹进行解析是可行的，
甚至可以利用这些信号对运动状态进行区分。