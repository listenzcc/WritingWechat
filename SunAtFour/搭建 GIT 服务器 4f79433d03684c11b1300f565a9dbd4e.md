## 搭建 GIT 服务器

如果你拥有一台服务器的使用权限，就可以将它作为你的 GIT 服务器，像使用 GITHUB 一样来使用它。

要达到这个目的并不难，但中文互联网技术（IT）的经验分享，可能会让这个过程变得有些艰难。

---

## 侃侃而谈

要解决这个问题，你可以在百度或必应上搜索

> GIT SERVER

可以得到许多“亲测可用”的经验分享，它们都是非常详细的文档，几乎是手把手地将过程讲一步步地讲给听，

![Untitled](%E6%90%AD%E5%BB%BA%20GIT%20%E6%9C%8D%E5%8A%A1%E5%99%A8%204f79433d03684c11b1300f565a9dbd4e/Untitled.png)

由于工作过程非常简单，因此这些文档虽然不能说完全一样，但搭建过程千篇一律还是有的，总结下来有 4 步

1. 安装 GIT；
2. 创建 git 用户；
3. 给 git 创建登陆公钥；
4. 初始化 GIT 仓库。

依次执行这 4 个步骤，你的的确确会在服务器上，得到想要的 GIT 服务。但这个过程对普通用户来说遥不可及，因为普通用户根本没有权限创建 git 用户，所以会卡在第 2 步上。

而事实上，普通用户是可以创建自己的 GIT 服务的。要达到这个目的，所需要的仅仅是

> 用户可以通过 SSH 登陆服务器，就可以创建自己的 GIT 服务。

然而，按照上面的分析，如果普通用户按照网络上的“教程”去做，他不可能做到这一点。

## 似是而非

那么问题出在哪里？

> 我认为是因为全部的经验教程，都只提供了一条可行的路径，却十分默契地忽略了这些步骤的意义。

首先，这个 4 步的策略是凭空总结或杜撰的吗？我们说不是，因为它是 GIT 的官方文档在 4.4 节提供的推荐方案。

[Git - Setting Up the Server](https://git-scm.com/book/en/v2/Git-on-the-Server-Setting-Up-the-Server)

![Untitled](%E6%90%AD%E5%BB%BA%20GIT%20%E6%9C%8D%E5%8A%A1%E5%99%A8%204f79433d03684c11b1300f565a9dbd4e/Untitled%201.png)

![Untitled](%E6%90%AD%E5%BB%BA%20GIT%20%E6%9C%8D%E5%8A%A1%E5%99%A8%204f79433d03684c11b1300f565a9dbd4e/Untitled%202.png)

这个 4.4 节的题目是 Setting Up the Server，十分惹眼有题目，意思言简意赅，“来看我吧，我教你怎么搭建 GIT SERVER”。既然它写的 4 步走策略，那我们就跟着做即可。我不否认这个过程是抄对了，但它无疑忽略了为什么要这么做。

那么是官方文档写的有问题吗？我们说不是的，它是 4.4，它只承担属于 4.4 的作用。这不是为了追求幽默而写的俏皮话，因为在 4.2 节中，它十分明确地介绍了什么是

> Git on the Server

它需要 git 用户吗？不需要！它需要免密登陆吗？也不需要！

它需要什么呢？只需要 SSH 能够登陆

![Untitled](%E6%90%AD%E5%BB%BA%20GIT%20%E6%9C%8D%E5%8A%A1%E5%99%A8%204f79433d03684c11b1300f565a9dbd4e/Untitled%203.png)

![Untitled](%E6%90%AD%E5%BB%BA%20GIT%20%E6%9C%8D%E5%8A%A1%E5%99%A8%204f79433d03684c11b1300f565a9dbd4e/Untitled%204.png)

那么，只有你读了 4.2 ，才会明白背后的原因

-   为什么要建立 git 用户呢？因为如果创建 GIT 仓库的用户往往不希望别人每次登陆都用自己的 user；
-   为什么要给 git 用户创建登陆公钥呢？因为不想让 git 用户通过 shell 登陆；
-   为什么不想让 git 用户通过 shell 登陆呢？因为 shell 登陆太危险，容易给出过多的权限，危及仓库本身的安全。

因此，上面的 4 步操作，其实是 3 步操作

1. 安装 GIT；
2. 通过 SSH 登陆；
3. 初始化 GIT 仓库。

如果想要“共享”自己的 GIT 仓库，才需要将第 2 步进行扩展

-   2.1 创建 git 用户
-   2.2 为 git 用户创建公钥；
-   2.3 阻止 git 用户通过 shell 登陆。

以上是针对中文 IT 圈的一点吐槽，吐槽是因为有些事情始终看不惯。看不惯什么呢？

> 看不惯许多亲测可用的、似是而非的“经验之谈”。
