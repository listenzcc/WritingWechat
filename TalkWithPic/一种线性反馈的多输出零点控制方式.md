## 一种线性反馈的多输出零点控制方式

本文将试图说明一种面向线性反馈系统的，
基于共模差模控制的，
双输入、双输出反馈控制方式。
这只是第一个版本，
只给出定性分析，并不列出系统方程。

---

- [一种线性反馈的多输出零点控制方式](#一种线性反馈的多输出零点控制方式)
  - [误差反馈](#误差反馈)
  - [积分调整](#积分调整)
  - [测不到的点](#测不到的点)
    - [扰动分析](#扰动分析)

### 误差反馈

线性控制系统$y=f(x)$具有可加性

$$y_1 + y_2 = f(x_1 + x_2)$$

可加性是反馈控制的基础原理。
即，为了得到固定的输出值$\hat{y}$，可以采用反馈的方式。
反馈是将误差反向后，叠加到输入值的控制方式

$$x_{t + dt} = x_t - g(y_t - \hat{y})$$

其中，函数$g(\cdot)$是反馈控制函数，
若它的值很大，则称为深度负反馈。

反馈控制的优点是能够使最终的输出值**单调地**逼近于目标值。
但缺点同样明显，那就是输出值越接近目标值，调控信号就越微弱，
最终导致只能逼近，却永远无法达到目标值。

为了解决这个问题，经典的做法是引入积分项。

### 积分调整

积分项，是指前一小段时间内的误差累积

$$h_t = \int_{t-t_0}^{t} \gamma_\tau \cdot g(y_\tau - \hat{y}) d \tau$$

其中，$\gamma$是先验的正系数，$t_0$是指定的时间长度。

加入积分项后就形成了比例微积分（PID）反馈控制

$$x_{t + dt} = x_t - \alpha \cdot g(y_t - \hat{y}) - \beta \cdot h_t$$

其中，$\alpha$和$\beta$是比例系数。

此时就无须再担心目标值达不到的问题，
因为在趋近目标值的过程中，误差值会被记录下来，
从而使输出值小幅地“冲过”目标值，形成以目标值为中心的、振幅不断衰减的振荡。
通过理论分析可以证明，
在合适的比例参数下，
振幅衰减的速度总可以达到“足够快”，
从而满足控制要求。

因此，PID 控制可以解决**大部分**控制问题。

### 测不到的点

在实际使用中却面临这样一种情况，
即需要在较大的范围达到目标值，
就需要同时使多个值都满足特定要求，
比如多个输出都取零值。
但难点在于控制信号只有一路，
它无法受控于过多的目标信号。

具体来说，设定两个目标值，$B_1$和$B_2$，需要它们都趋向于零值

$$\hat{B_i} = 0, i \in 1, 2$$

控制器也有两个，它们是$C_1$和$C_2$。

![Demo](./linearSystem22.png)

为了达到同步控制的目的，
需要设定两个目标函数，

1. 整体偏置（共模）
   $$f = B_1 + B_2$$

2. 差值（差模）
   $$g = B_1 - B_2$$

控制器对两个目标函数进行控制

1. 控制器$C_1$
   $$C_1: f+g \rightarrow 0$$

2. 控制器$C_2$
   $$C_2: f-g \rightarrow 0$$

区分共模和差模两个控制变量看上去很麻烦，
但在控制中却极其必要，
其必要性需要从系统受到扰动的情况加以说明。

#### 扰动分析

简单情况下，
在单输入、单输出的控制环路中，
当系统受到振动而偏离目标值时，
PID 控制机制会对它进行自动纠正。

而在上例，双输入、双输出的情况下，
若采用一对一的控制方式

$$C_i: B_i \rightarrow 0, i \in 1, 2$$

就会出现这样一种极其不稳定的情况，

当某一路输出（$B_1$）受到扰动，
则它对应的控制信号变化会不可避免地引发另一个输出信号（$B_2$）的变化，
这是由于$B_1$与$B_2$都受控于两个控制器

$$B_1 = \phi(C_1, C_2), B_2 = \psi(C_1, C_2)$$

而另一路控制信号又受到它对应的输出的反馈，
产生控制动作，
又会反过来诱发$B_1$的变化，
从而造成扰动的恶性循环。

在极端情况下，
可能会产生衰减极慢的振荡；
或者说得更正式一点，

> 就是无法保证受控变量会在有限时间内收敛

而引入了共模和差模两种控制变量之后，
不良扰动就会受到抑制，
而这种抑制是由两个控制器同时产生动作的，
不会产生恶性循环，
从而保证受控变量在有限时间内收敛。
