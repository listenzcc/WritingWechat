## 初五迎财神

一晃已经初五，
假期余额严重不足。

正好今天的习俗是祭灶，
就索性写写发财的事。

> 从概率统计的角度来分析，
> 麻将怎么打才能赢？

本文可以带来三条建议

- 牌局进行到大概`14`轮时，就要警惕赢家的出现了；
- 如果你会赢的话，尽量基于起始的牌，不要大换血；
- 尽量留中间的牌，这样赢的概率更大。

---

- [初五迎财神](#初五迎财神)
- [基本规则](#基本规则)
- [概率分析](#概率分析)

## 基本规则

本人不会打麻将，
但基本规则还是知道的。

简单来说，
麻将是`4`个人的游戏，
大家轮流抓牌，
率先达到要求的玩家成为赢家。
赢家需要`14`张牌，
需要包含`3`个`3`连和`1`个奖，

-  `3`连有两种形式，一种是`3`张相同的牌，另一种`3`张连续的牌；
-  “奖”是`2`张相同的牌。

牌堆里共有`136`张牌，
其中包含如下四种：

- 万字牌，从一万到九万，每样`4`张，共`36`张；
- 饼字牌，从一饼到九饼，每样`4`张，共`36`张；
- 条字牌，从一条到九条，每样`4`张，共`36`张；
- 纯字牌，包括东、西、南、北、中、发、白，每样`4`张，共`28`张

其中，万字、饼字、条字可以按数字排成连续牌，纯字牌则不可以。

`4`名玩家首先获得`13`张牌，作为起始。
之后依次打抓一张牌和打出一张牌，
直到出现赢家。

基本规则就是这么简单。
下面进行简单的概率分析，
试图通过分析得出如何使自己的胜算更大。

## 概率分析

当然，这里使用的概率分析并非排列组合的计算，
那样过于繁琐，
而是使用非常简单的程序模拟方法，
学术上称为“蒙特卡洛”法。
即模拟大量场次的麻将游戏，
记录赢家获胜时的牌的信息即可。

得到简单的分析结果如下，

- 首先，取得胜利需要进行多少轮？
  见下图

  ![Ma Jiang 1](./majiang-1.png)

  可见，取得胜利需要`14`轮左右，
  如果胜利时使用“相同”的牌较多，
  则轮次稍有增加。
  这也说明，“连续”的`3`张牌比“相同”的`3`张牌更容易摸到；

- 其次，取得胜利时用到的牌是在哪些轮次中摸到的呢？
  见下图

  ![Ma Jiang 2](./majiang-2.png)

  这张图并不好看，但说明性很强，
  它的基本情况是，
  最后取胜的牌大概率是存在于一开始得到的`14`张牌中，
  所谓“出身决定论”，
  它说明，一开始得到的`14`张牌的情况如何，
  很大程度决定了最后取胜的结果；

- 最后，取得胜利时，哪些牌面的牌是更有用的？
  见下图

  ![Ma Jiang 3](./majiang-3.png)

  其中，有红色和蓝色两个直方图，
  红色代表使用“连续”的`3`张牌取胜时的牌面分布，
  可以看到，它呈现出一种倒`U`形的形状，
  举个例子来说，如果胜利需要“万字”牌，
  它更可能是“四、五、六”这样的中间的万字牌，
  而不太可能是“一、九”这样的边缘的万字牌。

这个实验给我们带来什么帮助呢？
有三点

- 牌局进行到大概`14`轮时，就要警惕赢家的出现了；
- 如果你会赢的话，尽量基于起始的牌，不要大换血；
- 尽量留中间的牌，这样赢的概率更大。

最后值得注意的是，
这些模拟是基于理想情况进行模拟，
即每个玩家只抓牌，而不是打出牌，
手里的牌不断累积，直到产生赢家的情况。

这种简化有两个不切实际的地方：

- 首先，玩家不可能未卜先知的知道哪些牌是最后胜利时需要的牌，导致实际估计出的轮次数量偏小；
- 其次，也没有考虑玩家之间互相限制和误导的情况，这进一步造成了估计值与实际场景的误差。

分析代码可见我的[代码笔记本](https://github.com/listenzcc/JupyterScripts "代码笔记本")。