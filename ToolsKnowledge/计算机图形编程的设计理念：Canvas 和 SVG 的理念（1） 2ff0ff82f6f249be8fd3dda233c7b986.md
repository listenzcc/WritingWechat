# 计算机图形编程的设计理念：Canvas 和 SVG 的理念（1）

最近继续出差，可以写些内容。编程工具也并不趁手，所以就干写写吧。

---
- [计算机图形编程的设计理念：Canvas 和 SVG 的理念（1）](#计算机图形编程的设计理念canvas-和-svg-的理念1)
  - [问题的由来](#问题的由来)
  - [图片还是内容？](#图片还是内容)
  - [Canvas 的设计理念：图形就是图像](#canvas-的设计理念图形就是图像)
  - [SVG 的设计理念：图形就是内容](#svg-的设计理念图形就是内容)


## 问题的由来

我不是这方面的专家，只是在不断重复的工作中有了一些想法，我觉得这些想法值得记录下来。
这些想法并不是无根之水，而是因为切实地遇到并解决了一些问题，它们包括但不限于：

1. 高速准实时信号采集过程中（如 EEG 信号），如何完成信号的实时显示、处理和反馈？
2. 为什么“过高”的显示器刷新率会导致系统准时性变差？
3. 在有图形的界面中，如何使“图形”与用户进行交互？

这些是实际的问题，但没有确定的答案。

在工程实践中，由于需求和设计框架不同，在不同的工程中有其各自专用的实现方法。这些实现方法不是排他的，也没有优劣之分。但我认为，如果要弄清楚他们（这些程序或框架）实际上做了些什么，以及他们是如何做的，就应该首先弄清楚一个问题，那就是计算处理的“图形”是图像还是内容？

## 图片还是内容？

从最狭义的角度来理解，所谓图像就是 RGB 图片，它从数据特征上等价于一个矩形数组，或者说是大矩阵

$$
width \times height \times 3
$$

它的在 xy 方向上的每一个值称为一个像素，每个像素具有 RGB 三个通道的数值，它们代表该颜色成分的能量大小。计算机能够以相当高效的方式将这个数组规定的图像“绘制”到屏幕上，从而形成人眼能看到的彩色图像。这是计算机典型的图像输出过程。

反过来，从图像输入的角度来理解，图片就是内容的集合。我们的相机、手机或其他光学成像设备的拍摄过程，就是将它“看到”的场景“映射”到这样的矩形数组中。不管这样做的手段和方法是怎样的，不管是通过化学胶片曝光还是 CMOS 管数字化，其本质过程都是将光信号（或其他能够直接或间接地转换成光的信号）转换成矩形像素集合的过程。

那么所谓的内容就是图像中的“物体”，物体就是在这个过程中消失或者被扭曲的那种东西。在小说《三体》中，地球最后的命运是被二维化方法消灭掉的，这个过程就是上述的拍摄过程的极端情况：一个场景的某瞬间被记录下来，其中所包含的全部物体朝向拍摄者的表面信息都存储在了成像设备中，

- 如果某个物体藏在另一个物体之后，那么它的所有信息就都消失了；
- 如果某个物体的部分被另一个物体所遮挡，那么它的部分信息就消失了；
- 如果某个细节不在物体朝向拍摄者的表面，那么这个细节也消失了；
- 除此之外，由于拍摄者与物体之间的角度不同，那么物体的大小、方向和纹理等特征也相应地受到扭曲。顺便一说，西方绘画中最重要的透视概念就是在这个过程中发挥作用的。

这些可能消失和被扭曲的东西就是内容，这可能需要一些想象力。比如下面的例子，想象你正常看这样的图片，并且有充分的时间和精力去挖掘图片背后的内容

- 深宅大院的老照片，图中可以有个人，可能犹抱琵琶半遮面，也可能只有一抹衣角，但人会想到“一入侯门深似海”的凄凉或者“悔教夫婿觅封侯”的惆怅；
- 数九寒冬的素描图，图中可能有无数条虫，但它们都潜伏在土地之下，没有任何阴影或者线条体现在图像中，但人会推理出雪地下蛰伏的昆虫；
- ……

稍微外延一下，图像的拍摄过程可以看作是人类通过技术发展不断积累海量数据的过程，绘画、雕塑、相机、手机都见证了这个过程的发展，这个过程需要感光元件越来越精细，计算机越来越高速、低功耗、小型化；而从二维图中检测、解码或推理出内容的过程就是近年来才开始火热的机器学习，这个过程需要计算机更加智能，像人一样从海量信息中进行经验总结，不仅能从庞大的像素组合中提取信息，更加能够推理和生成出隐藏在图像像素之下的海量信息。这类工作任重而道远。

回到本文关注的核心问题。从计算机技术的角度上讲，如果要进行图形化编程，不管你使用何种框架，要解决的是怎样的需求，首先需要明确一点，那就是，

> 计算机绘制的图片或产生的可交互组件，它们究竟更偏向图像还是更偏向内容？
> 
> - 如果你更关注图像，比如图像整体或各个像素的颜色信息，那么更应该采用 Canvas 的设计理念；
> - 如果你更关注图像中的内容，比如特定物体或控件等，那么更应该采用 SVG 的设计理念。

至于 Canvas 和 SVG 的设计理念分别是什么？我将在后文进行说明。

## Canvas 的设计理念：图形就是图像

![https://files.mdnice.com/user/15749/6aa70f26-44f5-4176-8414-3260c5652c1f.png](https://files.mdnice.com/user/15749/6aa70f26-44f5-4176-8414-3260c5652c1f.png)

[html5_canvas](https://www.w3schools.com/html/html5_canvas.asp)

## SVG 的设计理念：图形就是内容

![https://files.mdnice.com/user/15749/d818a545-9f43-45b0-8a23-8a48a17cfd97.png](https://files.mdnice.com/user/15749/d818a545-9f43-45b0-8a23-8a48a17cfd97.png)

[SVG](https://developer.mozilla.org/en-US/docs/Web/SVG)