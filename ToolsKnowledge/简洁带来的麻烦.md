## 简洁带来的麻烦

`Python`是十分简洁的计算机语言，但是简洁会不避免地带来歧义。
这些歧义则会导致一些麻烦。

---

- [简洁带来的麻烦](#简洁带来的麻烦)
- [Python的“模块”与“包”](#python的模块与包)
  - [包中的模块](#包中的模块)
  - [编辑器的妥协](#编辑器的妥协)

## Python的“模块”与“包”

Python中的“模块”与“包”只有一个区别

> 目录中，是否包含`__init__.py`文件。
> 有，则代表包；无，则代表一堆散碎的模块。

如下图所示

![Python Package Modules](Python-Package-Module.svg)

这种简洁则带来了一些麻烦。
主要的麻烦就在于一个`.`符号，涉及包中的模块相互调用时的语法。

### 包中的模块

参见上图中`Import from Inside`部分，它代表在目录内部，引用其他模块的方式。

> 在包内部，引用其他模块时，需要在模块名称前加`.`符号。

这个符号的用处是在于指代本目录下的包。
这本是一个良好的语法设置，但却在调试过程中，会引起较大的麻烦。
这个`.`符号，加也不是，不加也不是，非常尴尬。

- 待调试的模块在形式上不属于包

  在程序调试过程中，如果需要对文件进行单独调试，则需要对它进行单独运行。
  但单独运行时，又由于它并不“属于”特定的包，而不应加`.`符号；

- 待调试的模块在逻辑上属于包

  由于我们设计该模块应该使用于某个包，这就需要它调用包中的其他模块或设置。
  往往我们会发现，这种调试会要求我们对包中的所有相关模块都去掉`.`符号，才能与它匹配。

我并有找到解决这一问题的好的策略。

### 编辑器的妥协

目前，较简单的解决方法是放弃“包”的概念，只从模块的角度来构建你的`Python`工程。

在使用`VScode`编辑器的情况下，我的解决方法如下

- 以工程目录为根，对文件及目录进行组织；
- 根目录包含一些设置文件，如类似`settings.py`的文件；
- 工程以功能模块进行排布，各个功能包含若干个包，这些包可以通过

    ```python
    from settings import *
    ```

  来获取对应的设置，这样做的优势是这些设置可以获得良好的同步;

- 而为了使该语句成立，需要在编辑中设置环境变量，在目前的版本中可以采用如下设置

    ```json
    // .vscode/settings.json
    {
        "python.terminal.activateEnvInCurrentTerminal": true,
        "terminal.integrated.env.windows": {
            "pythonpath": "${workspaceFolder}"
        },
        "python.envFile": "${workspaceFolder}/.env"
    }
    // .env
    PYTHONPATH=`pwd`

    ```

    这些设置可以设定`Python`的搜索路径，使它能够正确识别`settings.py`文件，从而实现代替原生包管理的目的。

经过这样调整的新“包”既具有原生包的良好的模块间同步特性，又能够简单地进行单文件调试。
也方便`Jupyter Notebook`等工具的使用。
也就是说，我的新方案成功避免了原生包管理的`.`符号带来的进退失据的尴尬情况。
