# WebGL渲染 与 D3.plot 绘图的结合

WebGL 是一种基于 GPU 并行计算的高速渲染方法。而 D3.plot 绘图是基于 d3.js 的绘图库，它的优势在于规范化的图表制图。本文提供的工具是对另一款开源工具的修改，现在它将两类制图工具的数据通道打通，从而实现两层的渲染。

[Observable Plot + regl (Animation I)](https://observablehq.com/@listenzcc/observable-plot-regl-animation-i)

---
- [WebGL渲染 与 D3.plot 绘图的结合](#webgl渲染-与-d3plot-绘图的结合)
  - [WebGL 的优势](#webgl-的优势)
  - [D3.plot 绘图的优势](#d3plot-绘图的优势)
  - [二者结合](#二者结合)


## WebGL 的优势

这是一种基于 GPU 并行计算的渲染方法，准确地说是一种逐像素的 shader 渲染方法。

WebGL（Web Graphics Library）是一种用于在Web浏览器中进行高性能图形渲染的技术。它是基于GPU并行计算的渲染方法，准确地说是一种逐像素的shader渲染方法。WebGL允许开发人员使用JavaScript编写着色器程序，这些程序在GPU上并行执行，以实现复杂的图形效果。

WebGL通过使用OpenGL ES（OpenGL for Embedded Systems）的子集来实现硬件加速的2D和3D图形渲染。它允许开发人员利用计算机的图形处理单元（GPU）来执行计算密集型的图形操作，从而在Web应用程序中创建交互式和高性能的图形和视觉效果。

当然，WebGL 也有自己的问题，那就是它太注重高性能了，以至于无法照顾到各种图表需求。

## D3.plot 绘图的优势

而 D3.plot 绘图是基于 d3.js 的绘图库，它的优势在于规范化的图表制图。通常情况下，规范化的图表制图库旨在简化图表创建过程，提供易于使用的API和一致的图表风格，以减少开发人员的工作量并提高可视化的一致性。这使得绘制不同类型的图表变得更加容易，并且在绘制大规模数据集时尤为有用。

## 二者结合

本文提供的工具是对另一款开源工具的修改，现在它将两类制图工具的数据通道打通，从而实现两层的渲染。以下是一个多点电荷的电场模拟，

- 在底层，WebGL 负责根据微分方程对电场进行绘制；
- 在上层，D3.plot 负责绘制这些电荷的数值，以及它们之间的连线。

这种强强结合让两个模块的工作都得到了简化，专注于自己擅长的事情。

![Untitled](WebGL%E6%B8%B2%E6%9F%93%20%E4%B8%8E%20D3%20plot%20%E7%BB%98%E5%9B%BE%E7%9A%84%E7%BB%93%E5%90%88%20470b2d6a4a3c4921a8f53cb9bc7ba2f6/Untitled.png)

![20230903-100527.gif](WebGL%E6%B8%B2%E6%9F%93%20%E4%B8%8E%20D3%20plot%20%E7%BB%98%E5%9B%BE%E7%9A%84%E7%BB%93%E5%90%88%20470b2d6a4a3c4921a8f53cb9bc7ba2f6/20230903-100527.gif)