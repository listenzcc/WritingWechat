# 贷款与存款

这是在不考虑通胀的条件下，按揭、月供和储蓄之间相爱相杀的故事。
首先，它回答了贷款一定金额时，其本息相当于在银行存了多少钱；
之后，它回答了“等额本息”月供的计算方式，以及当确定首月还款特定数量的本金时，多少个月后能够结清贷款。

[Saving & Loan Curve](https://observablehq.com/@listenzcc/saving-loan-curve)

---
- [贷款与存款](#贷款与存款)
  - [基本设定](#基本设定)
  - [等额本金](#等额本金)
  - [等额本息](#等额本息)
    - [等额本息算法简述](#等额本息算法简述)



## 基本设定

你欠银行的钱叫按揭，你必须按月还款叫月供。同时，你可以在银行存一些钱来偿还债务。

> 假设你的储蓄利息是每年 0.03，而你的债务利息是每年 0.05，贷款期限是 300 个月，即 25 年。

【视频占位】

## 等额本金

首先计算最简单的等额本金还款方式，下图中的蓝色曲线显示由于按月偿还债务而储蓄日渐减少的情况。红色曲线显示债务按月偿还，欠款越来越少的情况。如果蓝色曲线在任何地方都超过了红色曲线，则表示储蓄完全覆盖了债务，你无须运用额外的钱来偿还贷款。蓝色数字显示了当债务全部偿还时，你口袋里还有多少钱。如果这两条曲线相交，这意味着你的储蓄被清空时，债务还没有完全偿还。红色数字显示当你的存款用完时，你仍然欠银行多少钱。当然，最理想的情况是在储蓄用完时，债务得到偿还，这意味着两条曲线在右下角相交。

> 从计算结果可知，如果你拥有银行100万元，那么你必须在银行中储蓄大约119万元，用来恰好在第 300 个月时完全偿还债务及其利息。多出的 19 万元则是贷款的利润。
> 注意，这 19 万元是从贷款周期的 300 个月来看折算到现在的金额，因此它不考虑未来可能发生的通胀。因此从另一个角度上说，当 300 个月后通胀达到 20% 时，才可以认为这 19 万花的是值得的。

下图中总储蓄的滑块是初始时你在银行存了多少钱，我假设储蓄及其利息完全用于按月偿还债务，下图显示贷款本息共 162 万元。

![Untitled](%E8%B4%B7%E6%AC%BE%E4%B8%8E%E5%AD%98%E6%AC%BE%201a8c52ad9c7d4650a4544bf0db734e53/Untitled.png)

下图左、右分别展示了初始储蓄不足（左）和超过（右）的情况。

![Untitled](%E8%B4%B7%E6%AC%BE%E4%B8%8E%E5%AD%98%E6%AC%BE%201a8c52ad9c7d4650a4544bf0db734e53/Untitled%201.png)

![Untitled](%E8%B4%B7%E6%AC%BE%E4%B8%8E%E5%AD%98%E6%AC%BE%201a8c52ad9c7d4650a4544bf0db734e53/Untitled%202.png)

## 等额本息

我无意再计算在等额本息条件下所需的储蓄值，而是将等额本息时每月还款额的计算方式列写如下。

> 先说结论，如果你想每月偿还相同金额的债务。当你在第一个月还本 585.67 元时，债务在 300 个月时恰好还清，月供为 5856.67 元，贷款的本息总额将达到 175 万元。
>

下图显示了债务是如何减少的，A1滑块控制第一个月的还款。

![Untitled](%E8%B4%B7%E6%AC%BE%E4%B8%8E%E5%AD%98%E6%AC%BE%201a8c52ad9c7d4650a4544bf0db734e53/Untitled%203.png)

下图左、右分别展示了初值过大（左）和过小（右）的情况，初值过大时贷款被提前结清，而初值过小时贷款无法结清。

![Untitled](%E8%B4%B7%E6%AC%BE%E4%B8%8E%E5%AD%98%E6%AC%BE%201a8c52ad9c7d4650a4544bf0db734e53/Untitled%204.png)

![Untitled](%E8%B4%B7%E6%AC%BE%E4%B8%8E%E5%AD%98%E6%AC%BE%201a8c52ad9c7d4650a4544bf0db734e53/Untitled%205.png)

### 等额本息算法简述

以下算法用来确定你应该每个月支付多少本金和利息，才能使每个月的还款相同。考虑这样一个数列，它代表每个月所还的本金数量

$$
a_1, a_2, \dots, a_M \in R^+
$$

我们的目标是在$M$个月后还清全部本金$T$，因此有等式

$$
\sum_{i=1}^{M} a_i = T
$$

由于每个月本金与利息的和相等，因此有等式

$$
(T - \sum_{i=1}^{n-1} a_i) \cdot r + a_n = \mathcal{C}
$$

其中，$\mathcal{C}$是待定常数，即月供数额。将上述结果进行整合有如下线性方程组

$$
\begin{cases}T \cdot r + a_1 &= \mathcal{C} \\(T - a_1) \cdot r + a_2 &= \mathcal{C} \\(T - a_1 - a_2) \cdot r + a_3 &= \mathcal{C} \\\vdots \\(T - \sum_{i=1}^{M-1}a_i) \cdot r + a_M &= \mathcal{C} \\
\sum_{i=1}^{M} a_i &= T
\end{cases}
$$

由于方程线性无关，且它们的数量等于未知数的数量，因此可知该方程有唯一解。我们不再纠结如何求解，只做前向模拟即可。所谓前向模拟是在指定 $a_1$时，通过迭代算法求出全部还款数列，之后通过相加的结果寻找在第 300 个月时恰好结清贷款的 $a_1$即可。